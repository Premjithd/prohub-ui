<div class="profile-page">
  <!-- Profile Header Section -->
  <div class="profile-header-section">
    <div class="profile-header">
      <div class="profile-avatar">
        <img src="assets/images/user-placeholder.png" alt="Profile Picture" class="profile-picture" />
        <div class="status-badge">Active</div>
      </div>
      
      <div class="profile-details">
        <ng-container *ngIf="auth.isAuthenticated()">
          <h1>{{ user.firstName }} {{ user.lastName }}</h1>
          <p class="subtitle">Member since {{ user.createdAt | date:'MMM yyyy' }}</p>
        </ng-container>
        
        <div class="info-grid">
          <div class="info-item">
            <span class="info-label">First Name</span>
            <span class="info-value">{{ user.firstName }}</span>
          </div>
          <div class="info-item">
            <span class="info-label">Last Name</span>
            <span class="info-value">{{ user.lastName }}</span>
          </div>
          <div class="info-item">
            <span class="info-label">Email</span>
            <div class="info-value-with-status">
              <span class="info-value">{{ user.email }}</span>
              <span class="verification-badge" [ngClass]="user.isEmailVerified ? 'verified' : 'unverified'">
                <mat-icon class="badge-icon">{{ user.isEmailVerified ? 'check_circle' : 'cancel' }}</mat-icon>
                {{ user.isEmailVerified ? 'Verified' : 'Unverified' }}
              </span>
            </div>
          </div>
          <div class="info-item">
            <span class="info-label">Phone</span>
            <div class="info-value-with-status">
              <span class="info-value">{{ user.phoneNumber || 'Not set' }}</span>
              <span class="verification-badge" [ngClass]="user.isPhoneVerified ? 'verified' : 'unverified'" *ngIf="user.phoneNumber">
                <mat-icon class="badge-icon">{{ user.isPhoneVerified ? 'check_circle' : 'cancel' }}</mat-icon>
                {{ user.isPhoneVerified ? 'Verified' : 'Unverified' }}
              </span>
            </div>
          </div>
          <div class="info-item">
            <span class="info-label">User Type</span>
            <span class="info-value badge" [ngClass]="user.userType === 'Pro' ? 'badge-pro' : 'badge-user'">
              {{ user.userType }}
            </span>
          </div>
          <div class="info-item">
            <span class="info-label">Member Since</span>
            <span class="info-value">{{ user.createdAt | date:'MMM d, yyyy' }}</span>
          </div>
        </div>

        <div class="action-buttons" *ngIf="!isEditing">
          <button class="btn btn-primary" (click)="toggleEdit()">
            <mat-icon>edit</mat-icon>
            Edit Profile
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Edit Form Section -->
  <div class="edit-form-section" *ngIf="isEditing">
    <div class="form-container">
      <h2 class="form-title">Update Your Information</h2>
      
      <!-- Success Message -->
      <div class="message-alert success-alert" *ngIf="successMessage">
        <mat-icon>check_circle</mat-icon>
        <span>{{ successMessage }}</span>
      </div>

      <!-- Error Message -->
      <div class="message-alert error-alert" *ngIf="errorMessage">
        <mat-icon>error</mat-icon>
        <span>{{ errorMessage }}</span>
      </div>
      
      <form #profileForm="ngForm" (ngSubmit)="updateProfile(profileForm)">
        <div class="form-group hide-id">
          <label>Id</label>
          <input
            type="number"
            name="id"
            [(ngModel)]="user.id"
            required          
          />
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>First Name</label>
            <input
              type="text"
              name="firstName"
              [(ngModel)]="user.firstName"
              required
              placeholder="Enter your first name"
            />
          </div>

          <div class="form-group">
            <label>Last Name</label>
            <input
              type="text"
              name="lastName"
              [(ngModel)]="user.lastName"
              required
              placeholder="Enter your last name"
            />
          </div>
        </div>

        <div class="form-group">
          <label>Email Address</label>
          <input
            type="email"
            name="email"
            [(ngModel)]="user.email"
            required
            placeholder="Enter your email"
          />
        </div>

        <div class="form-group">
          <label>Phone Number</label>
          <input
            type="text"
            name="phoneNumber"
            [(ngModel)]="user.phoneNumber"
            placeholder="Enter your phone number"
          />
        </div>

        <div class="form-actions">
          <button type="submit" class="btn btn-success" [disabled]="!profileForm.valid">
            <mat-icon>save</mat-icon>
            Save Changes
          </button>
          <button type="button" class="btn btn-cancel" (click)="cancelEdit()">
            <mat-icon>close</mat-icon>
            Cancel
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
